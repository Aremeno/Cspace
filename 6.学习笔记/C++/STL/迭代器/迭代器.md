# 迭代器

迭代器（Iterator）是一种用于访问容器中元素的对象。它提供了一种统一的方式来遍历不同类型的容器，是容器与算法之间的桥梁。

## 迭代器的本质

迭代器本质上是一个**类对象**，它封装了访问容器元素的逻辑，行为类似于指针（其实迭代器就是一种**智能指针**）。通过迭代器，可以实现对容器中元素的遍历、访问和操作，而不需要了解容器的具体实现细节。

```cpp
// 指针的行为
int arr[] = {1, 2, 3, 4, 5};
int *ptr = arr; // 指向数组的第一个元素
cout << *ptr << endl; // 输出1
ptr++; // 移动到下一个元素

// 迭代器的行为
vector<int> vec = {1, 2, 3, 4, 5};
vector<int>::iterator it = vec.begin(); // 指向容器的第一个元素
cout << *it << endl; // 输出1
it++; // 移动到下一个元素
```

## 迭代器的分类

根据不同的功能和操作能力，迭代器可以分为以下几类：

### 输入迭代器（Input Iterator）

**只能读，不能写，单向移动；只能进行一次遍历。**

```cpp
// 从输入流中读取数据的迭代器
istream_iterator<int> in_it(cin);
int value = *in_it; // 读取一个整数
++in_it; // 移动到下一个元素
```

### 输出迭代器（Output Iterator）

**只能写，不能读，单向移动；只能进行一次遍历。**

```cpp
// 向输出流写入数据的迭代器
ostream_iterator<int> out_it(cout, " ");
*out_it = 10; // 输出10
```

### 前向迭代器（Forward Iterator）

**可读可写，单向移动；可以多次遍历。**

```cpp
// 典型容器： std::forward_list
forward_list<int> flist = {1,2,3};
auto it = flist.begin();
*it = 10; // 修改元素
int value = *it; // 读取元素
it++; //只能向前移动
```

### 双向迭代器（Bidirectional Iterator）

**可读可写，双向移动；可以多次遍历。**

```cpp
// 典型容器： std::list, std::set, std::map
list<int> mylist = {1,2,3};
auto it = mylist.begin();
it++; // 向前移动
it--; // 向后移动
```

### 随机访问迭代器（Random Access Iterator）

**可读可写，双向移动；可以多次遍历；支持随机访问。**

```cpp
// 典型容器： std::vector, std::deque, 原生数组
vector<int> vec = {1,2,3,4,5};
auto it = vec.begin();
it += 2; // 随机访问，移动到第三个元素
int value = *(it); // 读取第三个元素
if(it1 < it2) { // 比较两个迭代器
    // ...
}
```

**说实在的，以上这些分类大部分情况下我们并不需要记住这么详细，只要知道迭代器是用来遍历容器的，并且不同的容器支持不同类型的迭代器就可以了。**